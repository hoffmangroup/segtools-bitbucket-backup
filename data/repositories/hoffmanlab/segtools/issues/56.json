{"priority": "major", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segtools.json"}, "html": {"href": "#!/hoffmanlab/segtools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{981b7f63-4900-4255-97c0-c244f833a3ee}ts=python"}}, "type": "repository", "name": "segtools", "full_name": "hoffmanlab/segtools", "uuid": "{981b7f63-4900-4255-97c0-c244f833a3ee}"}, "links": {"attachments": {"href": "data/repositories/hoffmanlab/segtools/issues/56/attachments_page=1.json"}, "self": {"href": "data/repositories/hoffmanlab/segtools/issues/56.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/hoffmanlab/segtools/issues/56/watch"}, "comments": {"href": "data/repositories/hoffmanlab/segtools/issues/56/comments_page=1.json"}, "html": {"href": "#!/hoffmanlab/segtools/issues/56/mapping-labels-between-annotations"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/hoffmanlab/segtools/issues/56/vote"}}, "reporter": {"display_name": "mlibbrecht", "uuid": "{5386772a-11f2-40a6-922a-1557e4210ce0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5386772a-11f2-40a6-922a-1557e4210ce0%7D"}, "html": {"href": "https://bitbucket.org/%7B5386772a-11f2-40a6-922a-1557e4210ce0%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/4f04fb35d1668084963524c0e908eac9d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsM-5.png"}}, "nickname": "mlibbrecht", "type": "user", "account_id": "557058:1c71e8bb-defa-4b90-b75b-f9517c35ceb8"}, "title": "Mapping labels between annotations", "component": null, "votes": 0, "watches": 2, "content": {"raw": "From: Michael Hoffman <michael.hoffman@utoronto.ca>\r\nSent: Monday, June 18, 2018 10:39 AM\r\nTo: Maxwell Libbrecht\r\nCc: Francis Nguyen; Winnie Xu\r\nSubject: Re: Comparing Segway runs\r\n \r\nIt's a good idea but I am thin on bandwidth for this. You want to upload these as part of a segtools feature request? At the very least it will make it easy for people to find it.\r\n\r\nMichael\r\n\r\nOn Mon, Jun 18, 2018 at 1:34 PM Maxwell Libbrecht <maxwell_libbrecht@sfu.ca> wrote:\r\nHi Francis,\r\n\r\nI attached some scripts I wrote to do what you're asking for. overlap.py is the main script, which calls the others. The script (1) calls segtools-overlap to calculate the overlap between the annotations, (2) runs the Hungarian algorithm to calculate a mapping (stable marriage is also implemented and selectable using an option), (3) computes an ordering of the mapped labels so that high-overlap pairs appear close to each other using [this algorithm](http://cstheory.stackexchange.com/questions/8878/algorithm-for-ordering-a-list-under-a-similarity-function), and (4) uses segtools-overlap to create a plot with the paired labels on the diagonal. Please let me know if you run into any problems using them.\r\n\r\nMichael, I've been meaning for a while to try to get these incorporated into segtools. You would call segtools overlap --map (or something) to perform the matching and output the ordered plot (only valid for annotations with the same number of labels). If  you find any bandwidth for this, it would be good to get it done.\r\n\r\nCheers,\r\nMax\r\n\r\nFrom: Francis Nguyen <fr.nguyen@mail.utoronto.ca>\r\nSent: Friday, June 15, 2018 11:35:40 AM\r\nTo: Maxwell Libbrecht\r\nCc: Winnie Xu\r\nSubject: Comparing Segway runs\r\n \r\nHello Dr. Libbrecht,\r\n\r\nI was wondering if you had some script to compare different Segway runs? Something that would tie up one set of labels from one run to a set of labels from another. Dr. Hoffman described this as the Stable Marriage problem for Segway labels.\r\n\r\nIf so, we would be interested in using it for our current work with Segway. Could you let us know if you have something for this?\r\n\r\nThank you for your time,\r\nFrancis Nguyen\r\nCC. Winnie Xu", "markup": "markdown", "html": "<p>From: Michael Hoffman <a href=\"mailto:michael.hoffman@utoronto.ca\">&#109;&#105;&#99;&#104;&#97;&#101;&#108;&#46;&#104;&#111;&#102;&#102;&#109;&#97;&#110;&#64;&#117;&#116;&#111;&#114;&#111;&#110;&#116;&#111;&#46;&#99;&#97;</a>\nSent: Monday, June 18, 2018 10:39 AM\nTo: Maxwell Libbrecht\nCc: Francis Nguyen; Winnie Xu\nSubject: Re: Comparing Segway runs</p>\n<p>It's a good idea but I am thin on bandwidth for this. You want to upload these as part of a segtools feature request? At the very least it will make it easy for people to find it.</p>\n<p>Michael</p>\n<p>On Mon, Jun 18, 2018 at 1:34 PM Maxwell Libbrecht <a href=\"mailto:maxwell_libbrecht@sfu.ca\">&#109;&#97;&#120;&#119;&#101;&#108;&#108;&#95;&#108;&#105;&#98;&#98;&#114;&#101;&#99;&#104;&#116;&#64;&#115;&#102;&#117;&#46;&#99;&#97;</a> wrote:\nHi Francis,</p>\n<p>I attached some scripts I wrote to do what you're asking for. overlap.py is the main script, which calls the others. The script (1) calls segtools-overlap to calculate the overlap between the annotations, (2) runs the Hungarian algorithm to calculate a mapping (stable marriage is also implemented and selectable using an option), (3) computes an ordering of the mapped labels so that high-overlap pairs appear close to each other using <a data-is-external-link=\"true\" href=\"http://cstheory.stackexchange.com/questions/8878/algorithm-for-ordering-a-list-under-a-similarity-function\" rel=\"nofollow\">this algorithm</a>, and (4) uses segtools-overlap to create a plot with the paired labels on the diagonal. Please let me know if you run into any problems using them.</p>\n<p>Michael, I've been meaning for a while to try to get these incorporated into segtools. You would call segtools overlap --map (or something) to perform the matching and output the ordered plot (only valid for annotations with the same number of labels). If  you find any bandwidth for this, it would be good to get it done.</p>\n<p>Cheers,\nMax</p>\n<p>From: Francis Nguyen <a href=\"mailto:fr.nguyen@mail.utoronto.ca\">&#102;&#114;&#46;&#110;&#103;&#117;&#121;&#101;&#110;&#64;&#109;&#97;&#105;&#108;&#46;&#117;&#116;&#111;&#114;&#111;&#110;&#116;&#111;&#46;&#99;&#97;</a>\nSent: Friday, June 15, 2018 11:35:40 AM\nTo: Maxwell Libbrecht\nCc: Winnie Xu\nSubject: Comparing Segway runs</p>\n<p>Hello Dr. Libbrecht,</p>\n<p>I was wondering if you had some script to compare different Segway runs? Something that would tie up one set of labels from one run to a set of labels from another. Dr. Hoffman described this as the Stable Marriage problem for Segway labels.</p>\n<p>If so, we would be interested in using it for our current work with Segway. Could you let us know if you have something for this?</p>\n<p>Thank you for your time,\nFrancis Nguyen\nCC. Winnie Xu</p>", "type": "rendered"}, "assignee": {"display_name": "Michael Hoffman", "uuid": "{ffa8e039-5d4d-4f69-a4ba-ac25cbaf700b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bffa8e039-5d4d-4f69-a4ba-ac25cbaf700b%7D"}, "html": {"href": "https://bitbucket.org/%7Bffa8e039-5d4d-4f69-a4ba-ac25cbaf700b%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/6a95e857a02504cbad5fe965c9d9e4bbd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMH-1.png"}}, "nickname": "hoffman", "type": "user", "account_id": "557058:a9657985-692c-405c-995b-4e41cda7ba2b"}, "state": "new", "version": null, "edited_on": null, "created_on": "2018-06-18T17:58:05.289033+00:00", "milestone": null, "updated_on": "2018-06-18T17:58:05.289033+00:00", "type": "issue", "id": 56}