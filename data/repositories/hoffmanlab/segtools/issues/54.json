{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segtools.json"}, "html": {"href": "#!/hoffmanlab/segtools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{981b7f63-4900-4255-97c0-c244f833a3ee}ts=python"}}, "type": "repository", "name": "segtools", "full_name": "hoffmanlab/segtools", "uuid": "{981b7f63-4900-4255-97c0-c244f833a3ee}"}, "links": {"attachments": {"href": "data/repositories/hoffmanlab/segtools/issues/54/attachments_page=1.json"}, "self": {"href": "data/repositories/hoffmanlab/segtools/issues/54.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/hoffmanlab/segtools/issues/54/watch"}, "comments": {"href": "data/repositories/hoffmanlab/segtools/issues/54/comments_page=1.json"}, "html": {"href": "#!/hoffmanlab/segtools/issues/54/html-incompatibility-with-python-3"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/hoffmanlab/segtools/issues/54/vote"}}, "reporter": {"display_name": "Marc Asenjo Ponce de Leon", "uuid": "{6313b9a8-bef3-460c-900c-d8ad4018160a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6313b9a8-bef3-460c-900c-d8ad4018160a%7D"}, "html": {"href": "https://bitbucket.org/%7B6313b9a8-bef3-460c-900c-d8ad4018160a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/eef292786274d7e4f0ea642d25a88025d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsML-6.png"}}, "nickname": "MarcAsenjo", "type": "user", "account_id": "5a8496a72fa8952d487ec334"}, "title": "html incompatibility with python 3", "component": null, "votes": 0, "watches": 1, "content": {"raw": "When trying to run the code that creates the .div files (html format) the following error is raised:\r\n```\r\nTypeError: cannot use a string pattern on a bytes-like object\r\n```\r\nUpon inspection, the error seems to happen when running the following code from html.py:\r\n```py\r\ndef template_substitute(filename):\r\n   \"\"\"\r\n   Simplify import resource strings in the package\r\n   \"\"\"\r\n   return Template(template_string(filename)).safe_substitute\r\n```\r\n\r\n`template_string(filename)` returns a bytes object, to which a string pattern is applied in `safe_substitute`, which causes the TypeError.\r\n\r\nJust using `template_string(filename).decode(\u2018utf-8\u2019)` seems to work, so that it's a text object.", "markup": "markdown", "html": "<p>When trying to run the code that creates the .div files (html format) the following error is raised:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">TypeError</span><span class=\"o\">:</span> <span class=\"n\">cannot</span> <span class=\"n\">use</span> <span class=\"n\">a</span> <span class=\"n\">string</span> <span class=\"n\">pattern</span> <span class=\"n\">on</span> <span class=\"n\">a</span> <span class=\"n\">bytes</span><span class=\"o\">-</span><span class=\"n\">like</span> <span class=\"n\">object</span>\n</pre></div>\n\n\n<p>Upon inspection, the error seems to happen when running the following code from html.py:</p>\n<div class=\"codehilite language-py\"><pre><span></span><span class=\"k\">def</span> <span class=\"nf\">template_substitute</span><span class=\"p\">(</span><span class=\"n\">filename</span><span class=\"p\">):</span>\n   <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">   Simplify import resource strings in the package</span>\n<span class=\"sd\">   &quot;&quot;&quot;</span>\n   <span class=\"k\">return</span> <span class=\"n\">Template</span><span class=\"p\">(</span><span class=\"n\">template_string</span><span class=\"p\">(</span><span class=\"n\">filename</span><span class=\"p\">))</span><span class=\"o\">.</span><span class=\"n\">safe_substitute</span>\n</pre></div>\n\n\n<p><code>template_string(filename)</code> returns a bytes object, to which a string pattern is applied in <code>safe_substitute</code>, which causes the TypeError.</p>\n<p>Just using <code>template_string(filename).decode(\u2018utf-8\u2019)</code> seems to work, so that it's a text object.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2018-05-09T16:43:44.039952+00:00", "milestone": null, "updated_on": "2018-05-09T16:43:44.039952+00:00", "type": "issue", "id": 54}